---
layout:     post
title:      Android13开发者预览版发布
subtitle:   Android12还没适配完，android13首个预览版已悄然而至，来看看又有什么新特性吧
date:       2022-02-12
author:     coderman
header-img: img/article-bg.jpg
top: false
catalog: true 
tags:
    - Android
---
2022年02月10日，Google 宣布 Android 13 首个预览版面向开发者开放，此版本重点聚焦隐私和安全、提供开发者生产力、应用兼容性，并保持与 OpenJDK 11 更新一致、提供主题图标、带来新的照片选择器等功能。<br>
接下来，让我们一起来看看最新版本的 Android 13 到底有什么样的改变吧！本文转自谷歌开发者官方平台。
<p><img src="https://img-blog.csdnimg.cn/img_convert/6f84c6da15331cb0b4e35ba1b8d4f307.png" alt="" /></p> 
<p>每天&#xff0c;全世界都有数十亿人使用 Android 设备来完成各种事项。这些用户在使用 Android 时的优良体验离不开大家&#xff0c;也就是开发者社区的鼎力支持&#xff0c;是开发者的反馈和建议帮助我们打造出更强大的 Android。</p> 
<p>今天&#xff0c;我们为大家带来 Android 的下一个版本&#xff0c;即 Android 13 的首个开发者预览版。在 Android 13 中&#xff0c;我们将继续推进一些重要的主题: 隐私和安全&#xff0c;以及开发者生产力。我们还将基于 <a href="http://mp.weixin.qq.com/s?__biz&#61;Mzk0NDIwMTExNw&#61;&#61;&amp;mid&#61;2247502282&amp;idx&#61;1&amp;sn&#61;ed9fe9ab8c3f03499e4a6766e53287de&amp;chksm&#61;c32ac538f45d4c2e2803933233dc191a8216914c462aecf817fe7c7d5e9b88a5835d7b32c64b&amp;scene&#61;21#wechat_redirect">12L 上最近发布的一些更新</a>&#xff0c;帮助大家充分利用 2.5 亿台活跃的大屏幕 Android 设备。</p> 
<p>对于 Android 13 来说&#xff0c;这只是开始。我们会在后续的发布中和大家分享更多的内容。请继续阅读本文&#xff0c;并访问 <a href="https://developer.android.google.cn/about/versions/13">Android 13 开发者网站</a>&#xff0c;了解如何 <a href="https://developer.android.google.cn/about/versions/13/download">使用 Pixel 下载和安装系统映像</a>&#xff0c;以及 <a href="https://developer.android.google.cn/about/versions/13/overview#timeline">发布时间表</a>。和往常一样&#xff0c;尽早听到来自大家的反馈至关重要&#xff0c;这让我们有时间将其反映到最终发布的版本中。我们非常期待听到大家的想法&#xff0c;在这里我们预先感谢大家&#xff0c;是大家的助力帮助我们将 Android 打造成适合每个人的平台&#xff01;</p> 
<h2><a id="_10"></a><strong>以隐私和安全为核心</strong></h2> 
<p>在处理自己最私密、最敏感的信息的时候&#xff0c;人们希望使用值得信赖的操作系统和应用。隐私是 Android 产品原则的核心&#xff0c;Android 13 着重于在设备上提供更安全的环境&#xff0c;以及为用户提供更多的控制权&#xff0c;从而为所有人打造一个负责任、高质量的平台。在今天的开发者预览版中&#xff0c;我们推出了一个照片选择器&#xff0c;让用户可以在应用中安全地分享照片和视频&#xff1b;以及一个新的 Wi-Fi 权限&#xff0c;以进一步减少应用对位置权限的需求。我们建议大家尝试这些新的 API&#xff0c;并测试这些变化可能对您的应用造成的影响。</p> 
<p><strong>照片选择器和 API</strong> - 为了保护用户的照片和视频隐私&#xff0c;Android 13 增加了一个系统照片选择器&#xff0c;这是一种标准和优化的方式&#xff0c;让用户可以安全地分享本地和云端照片。一直以来&#xff0c;Android 通过文档选择器让用户与应用分享任意类型的文件&#xff0c;且该应用不需要获得查看设备上所有媒体文件的权限。照片选择器扩展了这种能力&#xff0c;且针对照片和视频提供了更契合的体验。应用可以通过 <a href="https://developer.android.google.cn/about/versions/13/features/photopicker">照片选择器 API</a> 访问用户分享的照片和视频&#xff0c;且不需要拥有查看设备上所有媒体文件的权限。作为运行 Android 11 及以上系统的设备 (不包括 Go 设备) 中的 MediaProvider 模块更新的一部分&#xff0c;我们计划通过 Google Play 系统更新将照片选择器体验带给更多的 Android 用户。欢迎大家体验照片选择器 API&#xff0c;并和我们 <a href="https://developer.android.google.cn/about/versions/13/feedback">分享使用反馈</a>&#xff01;</p> 
<p><img src="https://img-blog.csdnimg.cn/img_convert/ea8e60d27135660478ea88e46f6c242f.gif" alt="△ 照片选择器提供了统一、安全的方式来让用户授权应用访问照片和视频" /></p> 
<p>△ 照片选择器提供了统一、安全的方式来让用户授权应用访问照片和视频</p> 
<p><strong>用于 Wi-Fi 的附近设备权限</strong> - Android 13 为管理设备与周围 Wi-Fi 热点连接的应用添加了 <a href="https://developer.android.google.cn/reference/android/Manifest.permission.html#NEARBY_WIFI_DEVICES">NEARBY_WIFI_DEVICES</a> 运行时权限 (属于 NEARBY_DEVICES 权限组)。调用 <a href="https://developer.android.google.cn/about/versions/13/features/nearby-wifi-devices-permission#check-for-apis-that-require-permission">许多常用 Wi-Fi API</a> 的应用都会需要这个权限&#xff0c;从而在不需要位置权限的情况下通过 Wi-Fi 发现和连接附近的设备。此前&#xff0c;对于仅需要连接 Wi-Fi 设备&#xff0c;但实际上并不需要了解设备位置的应用来说&#xff0c;对位置权限的需求是一个挑战。以 Android 13 为目标平台的应用现在可以通过 <a href="https://developer.android.google.cn/reference/android/R.attr.html#usesPermissionFlags">“neverForLocation” 属性</a> 来申请 NEARBY_WIFI_DEVICES 权限&#xff0c;这将有助于促进隐私友好的应用设计&#xff0c;同时减少开发者们面临的阻碍。请访问 <a href="https://developer.android.google.cn/about/versions/13/behavior-changes-13#nearby-wifi-devices-permission">官方文档</a> 了解详细信息。</p> 
<h2><a id="_22"></a><strong>开发者生产力与工具</strong></h2> 
<p>Android 13 还带来了新的功能和工具以提升开发者生产力。帮助开发者们创建可以在数十亿台设备上运行的精美应用&#xff0c;是我们的核心任务之一。不论是在 Android 13 平台&#xff0c;还是通过我们的 <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz&#61;Mzk0NDIwMTExNw&#61;&#61;&amp;action&#61;getalbum&amp;album_id&#61;1797733109421948930#wechat_redirect">Modern Android Development</a> (<a href="https://developer.android.google.cn/modern-android-development">现代 Android 开发</a>) 工具&#xff0c;如您喜欢的 Kotlin 语言或 Jetpack 的推荐 API。我们希望通过帮助您更有效地工作&#xff0c;来降低开发成本&#xff0c;让您得以专注于继续构建令人惊叹的体验。</p> 
<p>下面为大家介绍今天的开发者预览版中的一些新内容:</p> 
<p><strong>快捷设置放置 API</strong> - 通知栏中的快捷设置 (Quick Settings) 让用户可以在不离开应用的情况下更改设置或快速进行相关操作。对于提供 <a href="https://developer.android.google.cn/reference/android/service/quicksettings/TileService">自定义磁贴</a> 的应用&#xff0c;我们会让用户更容易发现您的磁贴&#xff0c;并将它们添加到快捷设置中。通过新的 <a href="https://developer.android.google.cn/reference/android/app/StatusBarManager#requestAddTileService%28android.content.ComponentName,%20java.lang.CharSequence,%20android.graphics.drawable.Icon,%20java.util.concurrent.Executor,%20java.util.function.Consumer%3Cjava.lang.Integer%3E%29">磁贴放置 API</a>&#xff0c;您的应用现在可以提示用户&#xff0c;直接将您的自定义磁贴添加到快捷设置磁贴组中。一个新的系统对话框让用户无需离开您的应用&#xff0c;只需单次点击即可添加磁贴&#xff0c;而无需前往快捷设置中手动添加磁贴。</p> 
<p><img src="https://img-blog.csdnimg.cn/img_convert/63791812fada80675dba90043f0daf34.png" alt="" /></p> 
<p><strong>主题应用图标</strong> - 在 Android 13 中&#xff0c;我们将 Material You 动态颜色扩展到 Google 应用之外的所有应用图标&#xff0c;让用户可以基于其壁纸和其他主题偏好来选择图标色调。您的应用只需提供一个 <a href="https://developer.android.google.cn/about/versions/13/features#themed-app-icon-specs">单色的应用图标</a> (比如您的通知 Drawable)&#xff0c;并对自适应图标 XML 进行一些调整。我们鼓励所有开发者提供兼容的图标&#xff0c;从而为选择使用这一功能的用户提供一致的体验。主题应用图标最初会在 Pixel 设备上得到支持&#xff0c;我们正与设备制造商合作伙伴们一起将这个功能引入更多设备。请访问 <a href="https://developer.android.google.cn/about/versions/13/features#themed-app-icons">官方文档</a> 了解详细信息。</p> 
<p><img src="https://img-blog.csdnimg.cn/img_convert/21acd83811966679a4888adde96f2609.png" alt="" /></p> 
<p><strong>单个应用的语言偏好</strong> - 一些应用允许用户选择与系统语言不同的语言&#xff0c;以满足多语言用户的需求。这样的应用现在可以调用一个 <a href="https://developer.android.google.cn/reference/android/app/LocaleManager">新的系统 API</a>&#xff0c;来设置或获取用户的首选语言&#xff0c;从而在设置应用的运行时语言时减少样板代码并提高兼容性。为了更广泛的兼容性&#xff0c;我们将在即将推出的 Jetpack 开发库中增加一个类似的 API。请访问 <a href="https://developer.android.google.cn/about/versions/13/features/app-languages">官方文档</a> 了解详细信息。</p> 
<p><strong>更快的连字符</strong> - 连字符使折行文本更容易阅读&#xff0c;也让您的界面更具适应性。在 Android 13 中&#xff0c;我们将连字符的性能提升了多达 200%&#xff0c;您现在可以在 TextView 中启用连字符&#xff0c;它对渲染性能几乎没有影响。如果您要启用更快的连字符&#xff0c;可以在<a href="https://developer.android.google.cn/reference/android/widget/TextView#setHyphenationFrequency%28int%29"> setHyphenationFrequency()</a> 中使用新的 <a href="https://developer.android.google.cn/reference/android/widget/TextView#attr_android:hyphenationFrequency">fullFast 或 normalFast 频率</a>。欢迎大家体验更快的连字符&#xff0c;并和我们分享您的想法&#xff01;</p> 
<p><strong>可编程着色器 (shader)</strong> - Android 13 添加了对可编程 <a href="https://developer.android.google.cn/reference/android/graphics/RuntimeShader">RuntimeShader</a> 对象的支持&#xff0c;其行为使用 Android 图形着色语言 (Android Graphics Shading Language, AGSL) 定义。AGSL 与 GLSL 共享大部分语法&#xff0c;但在 Android 渲染引擎内工作&#xff0c;用以自定义 Android 画布中的绘制及过滤 View 中的内容。Android 内部使用这些着色器来实现 <a href="https://cs.android.com/android/platform/superproject/&#43;/master:frameworks/base/graphics/java/android/graphics/drawable/RippleShader.java;l&#61;24?q&#61;RippleShader&amp;sq&#61;">波纹</a>、<a href="https://cs.android.com/android/platform/superproject/&#43;/master:frameworks/native/libs/renderengine/skia/filters/BlurFilter.cpp?q&#61;RuntimeShader&amp;ss&#61;android%2Fplatform%2Fsuperproject&amp;start&#61;21">模糊</a> 和 <a href="https://cs.android.com/android/platform/superproject/&#43;/master:frameworks/base/tests/HwAccelerationTest/src/com/android/test/hwui/StretchShaderActivity.java?q&#61;RuntimeShader&amp;ss&#61;android%2Fplatform%2Fsuperproject&amp;start&#61;11">过度滚动拉伸效果</a>&#xff0c;Android 13 使您能够为自己的应用创建类似的高级效果。</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-eyKSuDgn-1644557035125)(https://devrel.andfun.cn/devrel/posts/2022/02/kQ2Inw.gif)]</p> 
<p>△ 改写自 <a href="https://twitter.com/notargs/status/1250468645030858753">GLSL 着色器</a> 的 AGSL 动态着色器</p> 
<p><strong>OpenJDK 11 更新</strong> - 在 Android 13 中&#xff0c;我们已经开始更新 Android 核心库&#xff0c;以便与 OpenJDK 11 LTS 版本保持一致&#xff0c;为应用和平台开发人员提供代码库更新和 Java 11 编程语言支持。作为运行 Android 12 及以上系统的设备的 ART 模块更新的一部分&#xff0c;我们计划通过 Google Play 系统更新将这些核心库的变更发布至更多设备。请访问 <a href="https://developer.android.google.cn/about/versions/13/features#core-libraries">官方文档</a> 了解详细信息。</p> 
<h2><a id="_48"></a><strong>应用兼容性</strong></h2> 
<p>发布新的平台版本时&#xff0c;我们优先考虑应用的兼容性&#xff0c;让系统更新的体验更快、更顺畅。在 Android 13 中&#xff0c;大多数面向应用的变更都是可选的&#xff0c;以便您有更多的时间进行调整和适配&#xff0c;我们还更新了工具和流程&#xff0c;帮助您更快地做好准备。</p> 
<p><strong>更多的 Android 系统功能通过 Google Play 更新</strong> - 在 Android 13 中&#xff0c;我们继续扩大对 <a href="https://android-developers.googleblog.com/2019/05/fresher-os-with-projects-treble-and-mainline.html">Google Play 系统更新</a> (Project Mainline) 的资源投入&#xff0c;使应用在不同的设备上拥有更一致、更安全的环境&#xff0c;并向用户交付新的特性和功能。我们现在可以通过对现有模块的更新&#xff0c;直接向旧版 Android 的用户推送新的功能&#xff0c;如照片选择器和 OpenJDK 11。我们还增加了新的模块&#xff0c;如蓝牙和超宽频模块&#xff0c;以进一步扩大 Android 可更新核心功能的范围。</p> 
<p><strong>针对平板电脑、可折叠设备和 Chromebook 进行优化</strong> - 随着平板电脑、可折叠设备和 Chromebook 等大屏幕设备的蓬勃发展&#xff0c;现在是时候让您的应用为这些设备做好准备&#xff0c;并设计适合任何屏幕的完全自适应的应用了。您可以依据我们的 <a href="https://developer.android.google.cn/docs/quality-guidelines/tablet-app-quality">平板电脑应用质量</a> 指南开始进行适配工作&#xff0c;然后学习如何为 <a href="https://developer.android.google.cn/guide/topics/large-screens/get-started-with-large-screens">大屏幕</a> 和 <a href="https://developer.android.google.cn/guide/topics/ui/foldables">可折叠设备</a> 进行构建。</p> 
<p><strong>更轻松地针对变更进行测试和调试</strong> - 为了让您更轻松地测试可能会影响应用的可选变更&#xff0c;我们今年依然将许多变更的开关交到您的手中。您可以在开发者选项或 adb 中单独强制启用或停用这些变更。请访问 <a href="https://developer.android.google.cn/about/versions/13/reference/compat-framework-changes">官方文档</a> 了解详细信息。</p> 
<p><img src="https://img-blog.csdnimg.cn/img_convert/8644afebf51d926977a93fea9e9ea020.png" alt="△ 开发者选项中的应用兼容性开关" /></p> 
<p>△ 开发者选项中的应用兼容性开关</p> 
<p><strong>平台稳定性里程碑</strong> - 和去年一样&#xff0c;我们会提前告知我们的平台稳定性里程碑&#xff0c;让您有更多的时间来规划应用兼容性工作。在抵达这个里程碑时&#xff0c;我们不仅会交付最终版 SDK/NDK API&#xff0c;而且还会锁定最终的内部 API 和面向应用的系统行为。我们预计将在 2022 年 6 月抵达平台稳定性里程碑&#xff0c;届时在正式版发布之前&#xff0c;您将有几周的时间进行最终测试。<a href="https://developer.android.google.cn/about/versions/13/overview">发布时间表</a> 详见:</p> 
<p><img src="https://img-blog.csdnimg.cn/img_convert/7bba34af7ab79109ee4ebcaaaa736e5e.png" alt="" /></p> 
<h2><a id="_Android_13_66"></a><strong>即刻开始体验 Android 13</strong></h2> 
<p>不论您是想体验 Android 13 的功能、测试应用还是 <a href="https://developer.android.google.cn/about/versions/13/feedback">提交反馈</a>&#xff0c;都可以从这次的开发者预览版开始。如果您想要测试应用在平板电脑和可折叠设备上的兼容性&#xff0c;最简单的方法是使用 Android 模拟器的平板电脑或可折叠设备配置&#xff0c;请阅读 <a href="https://developer.android.google.cn/about/versions/13/get">官方文档</a> 了解设置说明。对于手机&#xff0c;只需将系统映像 <a href="https://developer.android.google.cn/about/versions/13/download">下载并刷入</a> <strong>Pixel 6 Pro / 6 / 5a 5G / 5 / 4a (5G) / 4a / 4 XL / 4</strong> 设备&#xff0c;即可立即开始使用。如果您没有 Pixel 设备&#xff0c;则可以在 Android Studio 中使用带有 64 位系统映像的 Android 模拟器。如果想进行更广泛的测试&#xff0c;我们也提供了 GSI 映像。</p> 
<p><a href="https://developer.android.google.cn/about/versions/13/setup-sdk">设置</a> 完毕后&#xff0c;您可以:</p> 
<ul><li><strong>体验新功能和 API</strong> - 在开发者预览版的早期阶段&#xff0c;您的反馈至关重要。您可以在我们的跟踪页报告问题&#xff0c;也可以前往 <a href="https://developer.android.google.cn/about/versions/13/feedback">反馈与需求</a> 页面&#xff0c;通过特定功能的调查问卷提供直接反馈。</li><li><strong>测试现有应用的兼容性</strong> - 这是为了测试您的应用是否受到 Android 13 默认行为变更的影响。只需将您当前发布的应用安装到运行 Android 13 的设备或模拟器上并进行测试即可。</li><li><strong>使用可选变更项测试应用</strong> - Android 13 提供了可选的行为变更&#xff0c;这些变更仅在您的应用以新平台为目标时才会造成影响。尽早了解和评估这些变更十分重要。为了更易于测试&#xff0c;您可以 <a href="https://developer.android.google.cn/about/versions/13/reference/compat-framework-changes">单独启用或禁用这些变更</a>。</li></ul> 
<p>我们将在整个 Android 13 的发布周期内定期更新预览版系统映像和 SDK。这次发布的初始预览版<strong>仅供开发者使用</strong>&#xff0c;不面向日常或消费者使用&#xff0c;因此我们<strong>仅提供手动下载</strong>。在手动安装预览版本后&#xff0c;您将通过 OTA 方式自动获得后续预览版和 Beta 版更新。请访问 <a href="https://developer.android.google.cn/about/versions/13/get">官方文档</a> 了解详细信息:</p> 
<p>随着我们接近 Beta 版的发布&#xff0c;我们也会邀请消费者来体验 Android 13&#xff0c;届时将开放 Android Beta 注册。但请注意&#xff0c;目前 Android 13 尚未提供 Beta 版本。</p> 
<p>了解本次发布的完整信息&#xff0c;请访问 <a href="https://developer.android.google.cn/about/versions/13">Android 13 开发者网站</a>。</p> 
<p>** Java 和 OpenJDK 是 Oracle 和/或其附属公司的商标或注册商标。*</p>           