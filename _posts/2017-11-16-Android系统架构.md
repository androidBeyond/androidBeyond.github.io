---
layout:     post
title:      Android系统架构
subtitle:   Android系统架构简单记录学习
date:       2017-11-16
author:     duguma
header-img: img/article-bg.jpg
top: false
no-catalog: true
tags:
    - 系统架构
    - android
    - framework
---
![架构图](https://img-blog.csdnimg.cn/6f1a9ecb9da448508b1474f938eecd23.png?x-oss-process=type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_Q1NETiBAYW5kcm9pZEJleW9uZA==,size_31,color_FFFFFF,t_70,g_se,x_16)</br>
Android作为一个移动设备的平台，其软件层次结构包括了一个操作系统（OS），中间件（MiddleWare）和应用程序（Application）。根据Android的软件框图，其软件层次结构自下而上分为以下几个层次：

第一、操作系统层（OS 精简的Linux kernel）

第二、各种库（Libraries）和Android 运行环境（RunTime）

第三、应用程序框架（Application Framework）

第四、应用程序（Application）

以下分别介绍Andoid各个层次的软件的重点及其相关技术：

● 操作系统层（OS）Android使用Linux2.6作为操作系统，Linux2.6是一种标准的技术，Linux也是一个开放的操作系统。Android对操作系统的使用包括核心和驱动程序两部分，Android的Linux核心为标准的Linux2.6内核，Android更多的是需要一些与移动设备相关的驱动程序。主要的驱动如下所示：

显示驱动（Display Driver）：常用基于Linux的帧缓冲（Frame Buffer）驱动。

Flash内存驱动（Flash Memory Driver）

照相机驱动（Camera Driver）：常用基于Linux的v4l（Video for ）驱动。

音频驱动（Audio Driver）：常用基于ALSA（Advanced Linux Sound Architecture，高级Linux声音体系）驱动。

WiFi驱动（Camera Driver）：基于IEEE 802.11标准的驱动程序

键盘驱动（KeyBoard Driver）

蓝牙驱动（Bluetooth Driver）

Binder IPC驱动： Andoid一个特殊的驱动程序，具有单独的设备节点，提供进程间通讯的功能。

Power Management（能源管理）

● 各种库（Libraries）和Android 运行环境（RunTime）本层次对应一般嵌入式系统，相当于中间件层次。Android的本层次分成两个部分一个是各种库，另一个是Android 运行环境。本层的内容

大多是使用C++实现的。

在其中，各种库包括：

● C库：C语言的标准库，这也是系统中一个最为底层的库，C库是通过Linux的系统调用来实现。

● 多媒体框架（MediaFrameword）：这部分内容是Android多媒体的核心部分，基于PacketVideo（即PV）的OpenCORE，从功能上本库一共分为两大部分，一个部分是音频、视频的回放（PlayBack），另一部分是则是音视频的纪录（Recorder）。

● SGL：2D图像引擎。

● SSL：即Secure Socket Layer位于TCP/IP协议与各种应用层协议之间,为数据通讯提供安全支持。

● OpenGL ES 1.0 ：本部分提供了对3D的支持。

● 界面管理工具（Surface Management）：本部分提供了对管理显示子系统等功能。

● SQLite：一个通用的嵌入式数据库

● WebKit：网络浏览器的核心

● FreeType：位图和矢量字体的功能。

● Android 的各种库一般是以系统中间件的形式提供的，它们均有的一个显著特点就是与移动设备的平台的应用密切相关。

Android 运行环境主要指的虚拟机技术——Dalvik。Dalvik虚拟机和一般JAVA虚拟机（Java VM）不同，它执行的不是JAVA标准的字节码（bytecode ）而是Dalvik可执行格式（.dex）中执行文件。在执行的过程中，每一个应用程序即一个进程（Linux的一个Process）。    二者最大的区别在于Java VM是以基于栈的虚拟机（Stack-based），而Dalvik是基于寄存器的虚拟机（Register-based）。显然，后者最大的好处在于可以根据硬件实现更大的优化，这更适合移动设备的特点。

● 应用程序框架（Application Framework）Android的应用程序框架为应用程序层的开发者提供APIs，它实际上是一个应用程序的框架。由于上层的应用程序是以JAVA构建的，因此本层次提供的首先包含了UI程序中所需要的各种控件：

例如： Views (视图组件)包括 lists(列表), grids(栅格), text boxes(文本框), buttons(按钮)等。甚至一个嵌入式的Web浏览器。

一个Andoid的应用程序可以利用应用程序框架中的以下几个部分：

Activity （活动）

Broadcast Intent Receiver （广播意图接收者）

Service （服务）

Content Provider （内容提供者）

● 应用程序（Application）Android的应用程序主要是用户界面（User Interface）方面的，通常以JAVA程序编写，其中还可以包含各种资源文件（放置在res,assets目录中）JAVA程序及相关资源经过编译后，将生成一个APK包。Android本身提供了主屏幕（Home），联系人（Contact），电话（Phone），浏览器（Browers）等众多的核心应用。同时应用程序的开发者还可以使用应用程序框架层的API实现自己的程序。这也是Android开源的巨大潜力的体现。